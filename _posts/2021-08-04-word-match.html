---
category: game
layout: post
title: "Cross Language Match"
---

<style>
  /* The canvas itself cannot have any border or mouse coordinates will be incorrect */
  canvas { border: 0px none; }
</style>
<br>
This is a small application to assist in practicing language learning. This was written in C++ using SDL2.0, and was cross-compiled to WebAssembly / JS using Emscripten.
<br>
<br>

<canvas id="canvas" oncontextmenu="event.preventDefault()"></canvas><br><br>
<input type="file" id="inputfile"><br><br>
<button onclick="useFileInput(document.getElementById('inputfile'))">Submit</button><br>
<hr>
<p>Currently loaded file: </p><div id="currently_loaded_file">None</div>

<script type='text/javascript'>
  
  function useFileInput(fileInput) {

      let fileBlob = fileInput.files[0];
      
      if (fileBlob.length == 0) {
          return;
      }
      
      var reader = new FileReader();
      
      reader.onload = function () {
	  var data_str = reader.result;
	  Module.ccall('persist_file', null, ["string"], [data_str]);
      };

      reader.readAsText(fileBlob);

      fileNameWithoutFakePath = fileInput.value.match(/[^\\/]*$/)[0];
      document.getElementById("currently_loaded_file").innerHTML = fileNameWithoutFakePath;
      
  }

  var Module = {
      print: function(text) {
	  console.log('stdout: ' + text)
      },
      printErr: function(text) {
	  console.log('stderr: ' + text)
      },
      locateFile: function(path, prefix) {
          var modified_path = "/assets/js/word-match/" + path;
	  return modified_path;
      },
      canvas: (function() {
          var canvas = document.getElementById('canvas');
	  
          // As a default initial behavior, pop up an alert when webgl context is lost. To make your
          // application robust, you may want to override this behavior before shipping!
          // See http://www.khronos.org/registry/webgl/specs/latest/1.0/#5.15.2
          canvas.addEventListener("webglcontextlost", function(e) { alert('WebGL context lost. You will need to reload the page.'); e.preventDefault(); }, false);
	  
          return canvas;
      })()
  };
  
</script>

<script async src="/assets/js/word-match/CrossLanguageMatch.js">
</script>

